{% extends "fitness/base.html" %}
{% block content %}

<fieldset class="submenu">
<center><b style="font-size: 25px;">Фитнес-клуб «Богатырь»</b></center>
</fieldset><br/>
{% if error_message %}
    <fieldset>
        <legend>Отметить посетителя / <a href="{% url 'journal-list' %}">Вернуться назад</a></legend>
        <span style="color: red">{{ error_message }}</span>
    </fieldset>
{% else %}
<form method="POST">
{% csrf_token %}
    <fieldset>
        <legend>Отметить посетителя / <a href="{% url 'journal-list' %}">Вернуться назад</a></legend>
        {% if form.non_field_errors %}
        <span style="color: red;">
        {% for field, error_list in form.errors.items %}
            {% for error in error_list %}
                {{ error }}
            {% endfor %}
        {% endfor %}
        </span>
        {% endif %}
        <p>
            Номер абонемента:<br>
            {% if num_card_visit and not error_message %}
            <input type="text" id="id_num_membership" name="num_membership" value="{{ num_card_visit }}">
            {% elif num_card_visit_end and not error_message %}
            <input type="text" id="id_num_membership" readonly="readonly" name="num_membership" value="{{ num_card_visit_end }}">
            {% else %}
            {{ form.num_membership }}
            {% endif %}
            <br>
            {% for error in form.num_membership.errors %}
            <span style="color: red;">[{{ error }}]</span>
            {% endfor %}
        </p>
        {% if num_card_visit_end and not error_message %}
        <p style="display:None">
            Дата начала визита:<br>
            {{ form.date_start_visit }}<br>
            {% for error in form.date_start_visit.errors %}
            <span style="color: red;">[{{ error }}]</span>
            {% endfor %}
        </p>
        {% else %}
        <p>
            Дата начала визита:<br>
            {{ form.date_start_visit }}<br>
            {% for error in form.date_start_visit.errors %}
            <span style="color: red;">[{{ error }}]</span>
            {% endfor %}
        </p>
        {% endif %}
        {% if num_card_visit and not error_message %}
        <p style="display:None">
            Дата окончания визита:<br>
            {{ form.date_end_visit }} <span style="color: red;">(заполнить только при закрытии посещения)</span><br>
            {% for error in form.date_end_visit.errors %}
            <span style="color: red;">[{{ error }}]</span>
            {% endfor %}
        </p>
        {% else %}
        <p>
            Дата окончания визита:<br>
            {{ form.date_end_visit }}<br>
            {% for error in form.date_end_visit.errors %}
            <span style="color: red;">[{{ error }}]</span>
            {% endfor %}
        </p>
        {% endif %}
        {% if num_card_visit and not error_message %}
        <p style="display:None"> Пол:<br>
            <input type="text" id="id_gender" name="gender" readonly="readonly" value="{{ object.gender }}">
        </p>
        {% elif num_card_visit_end and not error_message %}
        <p style="display:None"> Пол:<br>
            <input type="text" id="id_gender" name="gender" readonly="readonly" value="{{ object.gender }}">
        </p>
        {% else %}
        <p>
            Пол:<br>
            {{ form.gender }}
        </p>
        {% endif %}
        {% if num_card_visit_end and not error_message %}
        <p>Номер шкафчика:<br><input type="text" id="id_locker_number" readonly="readonly" size="1" name="locker_number" value="{{ locker_number_for_end }}"></p>
        {% else %}
        <p>
            Номер шкафчика:<br>
            {{ form.locker_number }}<br>
            {% for error in form.locker_number.errors %}
            <span style="color: red;">[{{ error }}]</span>
            {% endfor %}
        </p>
        {% endif %}
        <div>
            <button type="submit">Сохранить</button>
        </div>
    </fieldset>
</form>
<p></p>
{% if num_card_visit and not error_message or num_card_visit_end and not error_message %}
<table class="client_detail">
  <tr>
    <th colspan="2">Информация о клиенте</th>
    <td rowspan="16" class="photo_client"><img src="{{ object.photo.url }}" width="200px" height="300px"><br/><small>Фото клиента</small></td>
  </tr>
  <tr>
    <td>ФИО клиента</td><td>{{ object.lastname }} {{ object.firstname }} {{ object.patronymic }}</td>
  </tr>
  <tr>
    <td>Дата рождения</td><td>{{ object.birthdate }}</td>
  </tr>
  <tr>
    <td>Паспортные данные</td><td>{{ object.passport }}</td>
  </tr>
  <tr>
    <td>Пол</td><td>{{ object.gender }}</td>
  </tr>
  <th colspan="2">Контактные данные</th>

  <tr>
    <td>Номер телефона</td><td>{{ object.phone }}</td>
  </tr>
  <tr>
    <td>Email</td><td>{{ object.email }}</td>
  </tr>
  <th colspan="2">Информация о договоре</th>

  <tr>
    <td>Номер договора</td><td>{{ object.num_contract }}</td>
  </tr>
  <tr>
    <td>Номер абонемента</td><td>{{ object.num_membership }}</td>
  </tr>
  <tr>
    <td>Дата начала</td><td>{{ object.date_start_contract }}</td>
  </tr>
  <tr>
    <td>Дата конца</td><td>{{ object.date_end_contract }}</td>
  </tr>
  <tr>
    <td>Тип абонемента</td><td>{{ object.type_membership }}</td>
  </tr>
  <tr>
    <td>Период действия</td><td>{{ object.time_period }}</td>
  </tr>
  <tr>
    <td>Статус абонемента</td><td>{{ object.status_membership }}</td>
  </tr>
  </td>

</table>
{% endif %}
{% endif %}
{% endblock content %}